<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

 	<ui:composition template="../template/common/commonLayout.xhtml"> 
 		<ui:define name="content"> 
		
				<h:form prependId="false"> 
					<p:panel style="display: inline-block;">

	 					<p:dataTable id="table" var="person" value="#{usersBean.persons}" 
	 						draggableColumns="true"
	 						emptyMessage="Lista Vuota" 
	 						paginator="true" 
	 						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        	rowsPerPageTemplate="15,20,25"
                        	rows="15"
                        	paginatorAlwaysVisible="false"
                        	lazy="true" 
                        	liveResize="true" 
                        	sortBy="#{person.name}" 
                        	sortOrder="ASCENDING"
	 						>
	 					
						    <p:column headerText="#{msg['name']}" sortBy="#{person.name}">
						        <h:outputText value="#{person.name}" />
						    </p:column>
						 
						    <p:column headerText="#{msg['surname']}" sortBy="#{person.surname}">
						        <h:outputText value="#{person.surname}" />
						    </p:column>
						 
						    <p:column headerText="#{msg['email']}">
						        <h:outputText value="#{person.email}" />
						    </p:column>

						    <p:column headerText="#{msg['age']}">
						        <h:outputText value="#{person.age}" />
						    </p:column>
						    
						     <p:column>
						     	<p:commandButton action="UPDATE"  icon="ui-icon-pencil"  ajax="false">
						     	
						     		<f:setPropertyActionListener target="#{personBean.person}" value="#{person}"/>
						     	</p:commandButton>
	
						     	<p:commandButton  update="table" icon="ui-icon ui-icon-trash" action="#{personBean.delete}">
        							<p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert"/>
        							<f:setPropertyActionListener target="#{personBean.person}" value="#{person}"/>
   								 </p:commandButton>
						     	
						     </p:column>
						    
						</p:dataTable>
						
						<br></br>
						
						<p:commandButton value="Registrazione" ajax="false" 
										action="REGISTRATION" />
		
					</p:panel>
					
					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" >
				        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" update="table" />
				        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				    </p:confirmDialog>

				</h:form>

		</ui:define> 
	</ui:composition> 
</html>